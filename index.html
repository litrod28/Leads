<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Supabase CRM</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="login-screen">
    <div class="login-box">
      <h2>Login</h2>
      <form id="login-form">
        <div class="login-field">
          <label>Username</label>
          <input type="text" id="username" required autocomplete="username">
        </div>
        <div class="login-field">
          <label>Password</label>
          <input type="password" id="password" required autocomplete="current-password">
        </div>
        <button class="glass-btn" type="submit">Login</button>
      </form>
      <div id="login-message"></div>
    </div>
  </div>
  <div id="main-app" style="display:none;">
    <nav class="navbar">
      <span id="user-label"></span>
      <button onclick="logoutClicked()">Logout</button>
    </nav>
    <div class="dashboard">
      <!-- Tabs and content container goes here -->
      <div id="tab-bar"></div>
      <div id="tab-content"></div>
    </div>
  </div>
  <script type="module">
    import * as App from './Leads.js';

    // Simple login handler
    document.getElementById('login-form').onsubmit = async function(e) {
      e.preventDefault();
      const uname = document.getElementById('username').value.trim().toLowerCase();
      const pwd = document.getElementById('password').value;
      try {
        const user = await App.login(uname, pwd);
        document.getElementById('user-label').innerText = user.username;
        document.getElementById('login-screen').style.display = 'none';
        document.getElementById('main-app').style.display = '';
        // You would now call your renderDashboard or similar
      } catch (err) {
        document.getElementById('login-message').innerText = err.message;
      }
    };

    window.logoutClicked = function() {
      App.logout();
      document.getElementById('main-app').style.display = 'none';
      document.getElementById('login-screen').style.display = '';
    };
    // Add your tabbed UI logic here, with calls like App.getLeads() etc.
  </script>
</body>
</html>
